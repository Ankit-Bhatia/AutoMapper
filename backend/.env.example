# ─── Server ───────────────────────────────────────────────────────────────────
PORT=4000
DATA_DIR=./src/data

# ─── Auth ─────────────────────────────────────────────────────────────────────
# Set REQUIRE_AUTH=false during local development to skip JWT enforcement
JWT_SECRET=change-this-to-a-random-32-char-secret
REQUIRE_AUTH=true
BCRYPT_ROUNDS=12

# ─── Database (PostgreSQL via Prisma) ─────────────────────────────────────────
DATABASE_URL=postgresql://postgres:password@localhost:5432/automapper

# ─── LLM / AI Provider ────────────────────────────────────────────────────────
# Leave OPENAI_API_KEY blank to use heuristic-only mode (no LLM calls)
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4o-mini

# ─── Frontend URL (used in OAuth redirect callbacks) ──────────────────────────
FRONTEND_URL=http://localhost:5173

# ─── Salesforce OAuth (Connected App — App credentials, NOT customer credentials)
# Register a Connected App in your Salesforce org dev hub:
#   Setup > App Manager > New Connected App
#   Callback URL: http://localhost:4000/api/oauth/salesforce/callback
# Customers log in via Salesforce's own login page — these creds stay server-side.
SF_APP_CLIENT_ID=
SF_APP_CLIENT_SECRET=
SF_APP_REDIRECT_URI=http://localhost:4000/api/oauth/salesforce/callback
SF_APP_LOGIN_URL=https://login.salesforce.com
# Legacy single-org credentials (kept for backwards compatibility; prefer OAuth above)
SF_LOGIN_URL=https://login.salesforce.com
SF_USERNAME=
SF_PASSWORD=
SF_SECURITY_TOKEN=
SF_ACCESS_TOKEN=
SF_INSTANCE_URL=

# ─── SAP S/4HANA (OData v4) ───────────────────────────────────────────────────
# These are machine-to-machine credentials entered by the operator at setup time.
# Customers enter these via the ConnectionPanel UI; they are never persisted to disk.
SAP_BASE_URL=https://your-sap-instance.s4hana.cloud.sap
SAP_USERNAME=
SAP_PASSWORD=
SAP_CLIENT=100

# ─── Jack Henry SilverLake (jXchange SOAP, OAuth 2.0) ─────────────────────────
# OAuth 2.0 client_credentials grant.
# Mandatory for new bank implementations from April 2026; all by April 2028.
# Token expiry: 600 seconds. DMZ test InstRtId: 011001276
JH_SL_INSTANCE_URL=https://your-jh-silverlake-instance.jackhenry.com
JH_SL_CLIENT_ID=
JH_SL_CLIENT_SECRET=
JH_SL_TOKEN_URL=

# ─── Jack Henry Core Director (jXchange SOAP, OAuth 2.0) ──────────────────────
# Community bank core — AcctType "10"=deposit, "40"=loan (differs from SilverLake D/L).
# DMZ test InstRtId: 11111900
JH_CD_INSTANCE_URL=https://your-jh-coredirector-instance.jackhenry.com
JH_CD_CLIENT_ID=
JH_CD_CLIENT_SECRET=
JH_CD_TOKEN_URL=

# ─── Jack Henry MCP (future — when Jack Henry ships an official MCP server) ────
# Set JH_MCP_SERVER_URL to the Jack Henry-hosted MCP endpoint when available.
# Until then, defaults to localhost:4001/mcp (AutoMapper's own demo MCP server).
# Ref: https://jackhenry.dev — watch Devcon announcements for availability.
JH_MCP_SERVER_URL=http://localhost:4001/mcp
JH_MCP_TOOL_PREFIX=jxchange
JH_CD_MCP_SERVER_URL=http://localhost:4001/mcp
JH_CD_MCP_TOOL_PREFIX=jxchange
